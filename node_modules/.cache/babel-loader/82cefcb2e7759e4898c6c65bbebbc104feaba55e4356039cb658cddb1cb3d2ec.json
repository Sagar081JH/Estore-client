{"ast":null,"code":"import axios from \"axios\";\nimport { notifyOrderPlaceFailed, notifyOrderPlaceSuccess } from \"../notification/Cart\";\nimport { Base_URL } from \"./Base_URL\";\nexport const getCartItems = setCartItems => {\n  axios.get(`${Base_URL}/cart/${sessionStorage.getItem(\"user_id\")}`).then(response => {\n    if (response.status === 200) {\n      let res = response.data;\n      setCartItems(res);\n    }\n  }).catch(error => {\n    console.error(\"cartk\", error);\n  });\n  return setCartItems;\n};\nexport const placeOrder = (cartItems, setIsOrderPlaced, setHidePriceSummary, setHideCartItems, setCartItems, setCartItems1, getCartItems1, getTotalPrice) => {\n  let userId = 0;\n  let orderRequest = [];\n  cartItems.map(item => {\n    orderRequest.push({\n      user_id: item.user_id,\n      product_id: item.product_id\n    });\n    userId = item.user_id;\n  });\n  axios.post(`${Base_URL}/orders`, orderRequest).then(response => {\n    if (response.status == 200) {\n      let res = response.data;\n      console.log(\"placeOrder :\", res);\n      setIsOrderPlaced(true);\n      removeCartAfterOrderPlaced(userId);\n      setHidePriceSummary(true);\n      setHideCartItems(true);\n      setCartItems([]);\n      setCartItems1([]);\n      getCartItems1();\n      getTotalPrice();\n      notifyOrderPlaceSuccess();\n    }\n  }).catch(error => {\n    notifyOrderPlaceFailed();\n    console.error(\"cartk\", error);\n    setIsOrderPlaced(false);\n  });\n};\nexport const removeCartAfterOrderPlaced = userId => {\n  axios.delete(`${Base_URL}/cart/delete/${userId}`).then(response => {\n    if (response.status == 200) {\n      let res = response.data;\n      console.log(\"cart Delete :\", res);\n    }\n  }).catch(error => {\n    console.error(\"cart delete error :\", error);\n  });\n};","map":{"version":3,"names":["axios","notifyOrderPlaceFailed","notifyOrderPlaceSuccess","Base_URL","getCartItems","setCartItems","get","sessionStorage","getItem","then","response","status","res","data","catch","error","console","placeOrder","cartItems","setIsOrderPlaced","setHidePriceSummary","setHideCartItems","setCartItems1","getCartItems1","getTotalPrice","userId","orderRequest","map","item","push","user_id","product_id","post","log","removeCartAfterOrderPlaced","delete"],"sources":["G:/My Projects/E-store-frontend-React-js-Source-code/src/API/CartAPI.js"],"sourcesContent":["import axios from \"axios\";\nimport {\n  notifyOrderPlaceFailed,\n  notifyOrderPlaceSuccess,\n} from \"../notification/Cart\";\nimport { Base_URL } from \"./Base_URL\";\n\nexport const getCartItems = (setCartItems) => {\n  axios\n    .get(`${Base_URL}/cart/${sessionStorage.getItem(\"user_id\")}`)\n    .then((response) => {\n      if (response.status === 200) {\n        let res = response.data;\n        setCartItems(res);\n      }\n    })\n    .catch((error) => {\n      console.error(\"cartk\", error);\n    });\n  return setCartItems;\n};\n\nexport const placeOrder = (\n  cartItems,\n  setIsOrderPlaced,\n  setHidePriceSummary,\n  setHideCartItems,\n  setCartItems,\n  setCartItems1,\n  getCartItems1,\n  getTotalPrice\n) => {\n  let userId = 0;\n  let orderRequest = [];\n  cartItems.map((item) => {\n    orderRequest.push({\n      user_id: item.user_id,\n      product_id: item.product_id,\n    });\n    userId = item.user_id;\n  });\n\n  axios\n    .post(`${Base_URL}/orders`, orderRequest)\n    .then((response) => {\n      if (response.status == 200) {\n        let res = response.data;\n        console.log(\"placeOrder :\", res);\n        setIsOrderPlaced(true);\n        removeCartAfterOrderPlaced(userId);\n        setHidePriceSummary(true);\n        setHideCartItems(true);\n        setCartItems([]);\n        setCartItems1([]);\n        getCartItems1();\n        getTotalPrice();\n        notifyOrderPlaceSuccess();\n      }\n    })\n    .catch((error) => {\n      notifyOrderPlaceFailed();\n      console.error(\"cartk\", error);\n      setIsOrderPlaced(false);\n    });\n};\n\nexport const removeCartAfterOrderPlaced = (userId) => {\n  axios\n    .delete(`${Base_URL}/cart/delete/${userId}`)\n    .then((response) => {\n      if (response.status == 200) {\n        let res = response.data;\n        console.log(\"cart Delete :\", res);\n      }\n    })\n    .catch((error) => {\n      console.error(\"cart delete error :\", error);\n    });\n};\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SACEC,sBAAsB,EACtBC,uBAAuB,QAClB,sBAAsB;AAC7B,SAASC,QAAQ,QAAQ,YAAY;AAErC,OAAO,MAAMC,YAAY,GAAIC,YAAY,IAAK;EAC5CL,KAAK,CACFM,GAAG,CAAC,GAAGH,QAAQ,SAASI,cAAc,CAACC,OAAO,CAAC,SAAS,CAAC,EAAE,CAAC,CAC5DC,IAAI,CAAEC,QAAQ,IAAK;IAClB,IAAIA,QAAQ,CAACC,MAAM,KAAK,GAAG,EAAE;MAC3B,IAAIC,GAAG,GAAGF,QAAQ,CAACG,IAAI;MACvBR,YAAY,CAACO,GAAG,CAAC;IACnB;EACF,CAAC,CAAC,CACDE,KAAK,CAAEC,KAAK,IAAK;IAChBC,OAAO,CAACD,KAAK,CAAC,OAAO,EAAEA,KAAK,CAAC;EAC/B,CAAC,CAAC;EACJ,OAAOV,YAAY;AACrB,CAAC;AAED,OAAO,MAAMY,UAAU,GAAGA,CACxBC,SAAS,EACTC,gBAAgB,EAChBC,mBAAmB,EACnBC,gBAAgB,EAChBhB,YAAY,EACZiB,aAAa,EACbC,aAAa,EACbC,aAAa,KACV;EACH,IAAIC,MAAM,GAAG,CAAC;EACd,IAAIC,YAAY,GAAG,EAAE;EACrBR,SAAS,CAACS,GAAG,CAAEC,IAAI,IAAK;IACtBF,YAAY,CAACG,IAAI,CAAC;MAChBC,OAAO,EAAEF,IAAI,CAACE,OAAO;MACrBC,UAAU,EAAEH,IAAI,CAACG;IACnB,CAAC,CAAC;IACFN,MAAM,GAAGG,IAAI,CAACE,OAAO;EACvB,CAAC,CAAC;EAEF9B,KAAK,CACFgC,IAAI,CAAC,GAAG7B,QAAQ,SAAS,EAAEuB,YAAY,CAAC,CACxCjB,IAAI,CAAEC,QAAQ,IAAK;IAClB,IAAIA,QAAQ,CAACC,MAAM,IAAI,GAAG,EAAE;MAC1B,IAAIC,GAAG,GAAGF,QAAQ,CAACG,IAAI;MACvBG,OAAO,CAACiB,GAAG,CAAC,cAAc,EAAErB,GAAG,CAAC;MAChCO,gBAAgB,CAAC,IAAI,CAAC;MACtBe,0BAA0B,CAACT,MAAM,CAAC;MAClCL,mBAAmB,CAAC,IAAI,CAAC;MACzBC,gBAAgB,CAAC,IAAI,CAAC;MACtBhB,YAAY,CAAC,EAAE,CAAC;MAChBiB,aAAa,CAAC,EAAE,CAAC;MACjBC,aAAa,CAAC,CAAC;MACfC,aAAa,CAAC,CAAC;MACftB,uBAAuB,CAAC,CAAC;IAC3B;EACF,CAAC,CAAC,CACDY,KAAK,CAAEC,KAAK,IAAK;IAChBd,sBAAsB,CAAC,CAAC;IACxBe,OAAO,CAACD,KAAK,CAAC,OAAO,EAAEA,KAAK,CAAC;IAC7BI,gBAAgB,CAAC,KAAK,CAAC;EACzB,CAAC,CAAC;AACN,CAAC;AAED,OAAO,MAAMe,0BAA0B,GAAIT,MAAM,IAAK;EACpDzB,KAAK,CACFmC,MAAM,CAAC,GAAGhC,QAAQ,gBAAgBsB,MAAM,EAAE,CAAC,CAC3ChB,IAAI,CAAEC,QAAQ,IAAK;IAClB,IAAIA,QAAQ,CAACC,MAAM,IAAI,GAAG,EAAE;MAC1B,IAAIC,GAAG,GAAGF,QAAQ,CAACG,IAAI;MACvBG,OAAO,CAACiB,GAAG,CAAC,eAAe,EAAErB,GAAG,CAAC;IACnC;EACF,CAAC,CAAC,CACDE,KAAK,CAAEC,KAAK,IAAK;IAChBC,OAAO,CAACD,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;EAC7C,CAAC,CAAC;AACN,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}